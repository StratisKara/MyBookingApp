@model BookingApp.Models.Accommodation

@{
    ViewData["Title"] = "Details";
}


<div class="card main-card">
    <div class="card-header">
        <h3>Accommodation - Details</h3>
    </div>

    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.User)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.User.Email)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Name)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Name)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Type)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Type)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Description)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Description)
            </dd>

            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Address)
            </dt>
            <dd class="col-sm-10">
                @Model.Address
            </dd>

            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Pictures)
            </dt>
            <dd class="col-sm-10">
                @if (Model.Pictures.Count != 0)
                {
                    <div class="row row-cols-1 row-cols-md-4 g-4">

                        @foreach (var item in Model.Pictures)
                        {

                            <div class="col">
                                <div class="card">
                                    <a href="~/upload/@Html.DisplayFor(modelItem => item.FileName)" target="_blank">
                                        <img src="~/upload/@Html.DisplayFor(modelItem => item.FileName)" class="card-img-top"
                                             style="object-fit: cover; width: 100%; height: 11em;">
                                    </a>
                                </div>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <p>No photos added</p>
                }
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Offers)
            </dt>

            <dd class="col-sm-10">
                @if (Model.Offers.Count != 0)
                {

                    <table class="table">
                        <tr>
                            <th>Date Added</th>
                            <th>Start of availability</th>
                            <th>End of availability</th>
                            <th>Price / Night</th>
                            <th>Cleaning fee</th>
                        </tr>
                        @foreach (var item in Model.Offers)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.AddingDateTime)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.StartAvailability)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.EndAvailability)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.PricePerNight)
                                </td>
                    
                            </tr>
                        }
                    </table>
                }
                else
                {
                    <p>No offers added</p>
                }
            </dd>

        </dl>

        <div class="text-center">
            <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary">Edition</a>
            <a asp-action="Index" class="btn btn-outline-secondary">Return to managment</a>
        </div>
    </div>
</div>

